<div>
    <app-tabs (onCloseTab)="onRemoveLocationTab($event)">
        @for (location of currentConditionsByZip(); track location) {
            <app-tab [label]="location.data.name + ' ' + location.zip"  [id]="location.zip">
                <div class="well flex" >
                    <div (click)="showForecast(location.zip)">
                        <h3>{{ location.data.name }} ({{ location.zip }})</h3>
                        <h4>Current conditions: {{ location.data.weather[0].main }}</h4>
                        <h4>Temperatures today:</h4>
                        <p>
                            Current {{ location.data.main.temp | number:'.0-0' }}
                            - Max {{ location.data.main.temp_max | number:'.0-0' }}
                            - Min {{ location.data.main.temp_min | number:'.0-0' }}
                        </p>
                        <p>
                            <a [routerLink]="['/forecast', location.zip]">Show 5-day forecast
                                for {{ location.data.name }}</a>
                        </p>
                    </div>
                    <div>
                        <span class="close" (click)="selectedLocation(location.zip)">&times;</span>
                        <img [src]="location.icon">
                    </div>
                </div>
            </app-tab>
        }
    </app-tabs>
<!-- todo: delete this -->
    <app-tabs (onCloseTab)="onRemoveLocation($event)">
            <app-tab [label]="'test'"  [id]="{test: 'key1'}">
                    Je suis le contenue 1
            </app-tab>
        <app-tab [label]="'test'"  [id]="{test: 'key1'}">
            Je suis le contenue 1
        </app-tab>
        <app-tab [label]="'test 2'"  [id]="{test: 'key2'}">
            Je suis le contenue 2
        </app-tab>
    </app-tabs>
</div>
